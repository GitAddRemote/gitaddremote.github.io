{{ define "main" }}
<article itemscope itemtype="http://schema.org/Article" class="project-detail">
  <header>
    <h1 class="post-title" itemprop="headline">{{ .Title }}</h1>

    <div class="post-meta">
      {{- if .Params.status -}}
        <div class="post-meta-item">
          <span class="project-status status-{{ lower .Params.status | replaceRE " " "-" }}">
            {{ .Params.status }}
          </span>
        </div>
      {{- end -}}

      {{- if .Date -}}
        <div class="post-meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" itemprop="datePublished">
            {{ .Date.Format "January 2, 2006" }}
          </time>
        </div>
      {{- end -}}

      {{- if .Params.tags -}}
        <div class="post-meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
            <line x1="7" y1="7" x2="7.01" y2="7"></line>
          </svg>
          {{- range $index, $tag := .Params.tags -}}
            {{- if $index }}, {{ end -}}
            <a href="{{ "/tags/" | relLangURL }}{{ $tag | urlize }}">{{ $tag }}</a>
          {{- end -}}
        </div>
      {{- end -}}
    </div>
  </header>

  <div class="post-content" itemprop="articleBody">
    {{ .Content }}
  </div>

  {{- if .Params.github -}}
    <div class="project-actions">
      <a href="{{ .Params.github }}" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        View on GitHub
      </a>
    </div>
  {{- end -}}

  {{- if or .PrevInSection .NextInSection -}}
    <nav class="post-navigation" role="navigation" aria-label="Post navigation">
      <hr>
      <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
        {{- if .PrevInSection -}}
          <div>
            <a href="{{ .PrevInSection.Permalink }}" rel="prev">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline; vertical-align: middle; margin-right: 4px;">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              {{ .PrevInSection.Title }}
            </a>
          </div>
        {{- else -}}
          <div></div>
        {{- end -}}

        {{- if .NextInSection -}}
          <div style="text-align: right;">
            <a href="{{ .NextInSection.Permalink }}" rel="next">
              {{ .NextInSection.Title }}
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline; vertical-align: middle; margin-left: 4px;">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </a>
          </div>
        {{- end -}}
      </div>
    </nav>
  {{- end -}}
</article>

<style>
/* Compact spacing for project detail pages */
.project-detail .post-content h2 {
  margin-top: 2rem;
  margin-bottom: 0.75rem;
}

.project-detail .post-content h3 {
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

.project-detail .post-content h4 {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

.project-detail .post-content p {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.project-detail .post-content ul,
.project-detail .post-content ol {
  margin-top: 0.5rem;
  margin-bottom: 0.75rem;
}

.project-detail .post-content li {
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}

.project-detail .post-content li p {
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}

.project-detail .post-content strong + ul,
.project-detail .post-content strong + ol {
  margin-top: 0.25rem;
}

.project-detail .post-content table {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

.project-detail .post-content pre {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

.project-detail .post-content hr {
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}

/* Status badge in header */
.project-status {
  padding: 0.25rem 0.75rem;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.status-active,
.status-in-progress {
  background: rgba(0, 255, 153, 0.2);
  color: var(--accent-primary);
  border: 1px solid var(--accent-primary);
}

.status-completed {
  background: rgba(100, 200, 255, 0.2);
  color: #64c8ff;
  border: 1px solid #64c8ff;
}

.status-archived {
  background: rgba(150, 150, 150, 0.2);
  color: #999;
  border: 1px solid #666;
}

/* Project action buttons */
.project-actions {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid var(--border-color);
}

.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 6px;
  font-weight: 600;
  font-size: 0.9375rem;
  text-decoration: none;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  border: 2px solid transparent;
  cursor: pointer;
}

.btn-primary {
  background: var(--accent-primary);
  color: var(--bg-primary);
  border-color: var(--accent-primary);
}

.btn-primary:hover {
  background: var(--accent-glow);
  border-color: var(--accent-glow);
  box-shadow: 0 4px 16px rgba(0, 255, 153, 0.3);
  transform: translateY(-1px);
}

.btn svg {
  width: 18px;
  height: 18px;
}
</style>
{{ end }}
